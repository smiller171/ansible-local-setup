---
- name: set up laptop
  hosts: localhost
  connection: local
  sudo: yes
  tasks:
  - name: add java repo
    sudo: yes
    apt_repository: repo='ppa:webupd8team/java' state=present
    register: result
    tags:
    - java

  - name: Select Oracle License
    sudo: yes
    shell: echo debconf shared/accepted-oracle-license-v1-1 select true | sudo debconf-set-selections
    when: result.changed
    tags:
    - java

  - name: Install JRE
    sudo: yes
    apt: name=oracle-java8-installer state=latest update-cache=yes
    tags:
    - java

  - name: install software
    apt: update_cache=yes name={{item}} state=latest
    with_items:
    - python
    - python-apt
    - git
    - build-essential
    - openssh-server
    - zsh
    - ansible
    - aptitude
    - s3cmd
    - mosh
    - p7zip

  - name: install software
    apt: update_cache=yes name={{item}} state=latest
    with_items:
    - terminator
    - android-tools*
    - numlockx
    - gparted
    tags:
    - gui

  - name: install zsh
    apt: update_cache=yes name=zsh state=latest
    tags:
    - zsh

  - name: enable numlock on boot
    lineinfile:
      dest: /etc/X11/xinit/xinitrc
      line: "/usr/bin/numlockx on"
      regexp: "^/usr/bin/numlockx "
    tags:
    - gui

  - name: apply updates
    apt: upgrade=yes update_cache=yes

  - name: remove software
    apt: name={{item}} state=absent
    with_items:
    - pinta
    - imagemagick

  - name: copy files
    sudo: no
    synchronize: src=files/ dest=~/ recursive=yes
    tags:
    - zsh

  - name: setup ansible log file
    sudo: yes
    file: path=/var/log/ansible.log state=touch mode=666

  - name: change default terminal to terminator
    shell: "gsettings set org.gnome.desktop.default-applications.terminal exec 'terminator'"
    tags:
    - gui
